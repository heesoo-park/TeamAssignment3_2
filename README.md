<h1 align="center">
<img width="80px" src="https://github.com/heesoo-park/TeamAssignment3_2/assets/116724657/df645cf6-0b18-4655-9106-97fa405174c3" align="center" alt="" />
 별개냥⭐
</h1>
 <p align="center">
   <a>강아지🐶와 고양이😺 반려동물이 되서 동물들과 대화해보세요!</a>
   <br />
   <br />
    <a href="https://github.com/heesoo-park/TeamAssignment3_2/actions/new">
      <img alt="Tests Passing" src="https://github.com/heesoo-park/TeamAssignment3_2/workflows/Test/badge.svg" />
    </a>
    <a href="https://codecov.io/gh/anuraghazra/github-readme-stats">
      <img alt="Tests Coverage" src="https://codecov.io/gh/heesoo-park/TeamAssignment3_2/branch/master/graph/badge.svg" />
    </a>
    <a href="https://github.com/heesoo-park/TeamAssignment3_2/graphs/contributors">
      <img alt="GitHub Contributors" src="https://img.shields.io/github/contributors/heesoo-park/TeamAssignment3_2" />
    </a>
    <a href="https://github.com/heesoo-park/TeamAssignment3_2/issues">
      <img alt="Issues" src="https://img.shields.io/github/issues/heesoo-park/TeamAssignment3_2?color=0088ff" />
    </a>
    <a href="https://github.com/heesoo-park/TeamAssignment3_2/pulls">
      <img alt="GitHub pull requests" src="https://img.shields.io/github/issues-pr/heesoo-park/TeamAssignment3_2?color=0088ff" />
    </a>
    <br />
    <br />
  </p>
  <p align="center">
    <a> 프로젝트 팀원</a>
    <br />
    <a href="https://github.com/heesoo-park">박희수</a>
    ·
    <a href="https://github.com/Guri999">심규상</a>
    ·
    <a href="https://github.com/eun-24k">김은이</a>
    ·
    <a href="https://github.com/csh-tiger/sparta.git">최성현</a>
  </p>
  <p align="center">
    <a>페이지 상세 설명</a>
    <br />
    <a href="/ReadMeFiles/SignUpPageActivity.md">로그인·회원가입</a>
    ·
    <a href="/ReadMeFiles/ChooseProfileActivity.md">프로필 선택</a>
    ·
    <a href="/ReadMeFiles/MainlPageActivity.md">메인 페이지</a>
    ·
    <a href="/ReadMeFiles/DetailPageActivity.md">디테일 페이지</a>
    ·
    <a href="/ReadMeFiles/PostPopUpActivity.md">게시물 페이지</a>
  </p>
</p>
 <h3 align = "center">PreView</h3>

 <p align ="center">
 <img alt="" src ="https://github.com/heesoo-park/TeamAssignment3_2/assets/116724657/efce75ed-a574-4119-a16f-6df2149f6f9e" width="110" heigth="50" />
 <img alt="" src ="https://github.com/heesoo-park/TeamAssignment3_2/assets/116724657/1aa3f389-2590-431d-9f0b-675086a504f4" width="110" heigth="50" />
 <img alt="" src ="https://github.com/heesoo-park/TeamAssignment3_2/assets/116724657/5d367d25-60de-4e17-8adb-9246739d64b1" width="110" heigth="50" />
 <img alt="" src ="https://github.com/heesoo-park/TeamAssignment3_2/assets/116724657/efac7713-dba6-4b61-a18a-0e4233a4ebcd" width="110" heigth="50" />
 <img alt="" src ="https://github.com/heesoo-park/TeamAssignment3_2/assets/116724657/701f8037-f202-49e2-97c3-196710c8748f" width="110" heigth="50" />
</p>




## 프로젝트 개요

### 프로젝트 팀원
박희수, 심규상, 김은이, 최성현

### 앱 이름
별개냥

### 앱 이름의 의미
강아지🐶와 고양이😺의 의미가 들어가 있으면서 인⭐그램의 '별'의 느낌도 가져가 익숙한 sns 느낌인데 강아지와 고양이가 주가 되는 sns임을 나타내는 동시에
'별거냐~'라는 의미도 가진다.

### 앱의 목적
자신의 펫이 주체가 되어 앱 내에서 재밌고 자유롭게 이야기를 공유하는 공간이 되는 것

### 프로젝트 일정
23/12/26 ~ 23/12/29

### 프로젝트 기획
먼저 팀노션에서 자유롭게 아이디어 브레인스토밍을 하고 
앱의 컨셉, 레퍼런스가 잡히고 나서 Figma를 가지고 레이아웃에 대한 의견을 나누고 결정했다.

<Figma 링크>

<p align="center">
 <a href="https://www.figma.com/file/W77t6eKPMSJsTW6WhqeqCJ/%EB%B3%84%EA%B0%9C%EB%83%A5?type=design&mode=design&t=WLSCOLn5fvtgA33U-1">
  <img alt="와이어프레임" src="https://github.com/heesoo-park/TeamAssignment3_2/assets/116724657/901448b8-cb81-49bb-a4bb-ef29a7fa5121"
</p>
  
### 역할 분담
박희수 : 사용자 정보 저장소 구현 & 메인 페이지 구현 & 프로필 이미지 선택 페이지 구현 & 발표 & 가로모드 구현

심규상 : 디테일 페이지 & 마이 페이지 구현 & 다크 모드 구현 & 가로 모드 구현 & 코드 최적화

김은이 : 로그인 & 회원가입 페이지 구현 & 애니메이션 효과 구현 & Figma UI 관리

최성현 : 메인 페이지 구현 & 원형 이미지뷰 구현

공통 : 문자열 관리(user_id1), 뷰 객체 이름(tv_signup_id), 깃허브 브랜치 & 풀 리퀘스트 관리

### 코드 컨벤션
베이스는 Kotlin 스타일 가이드에 맞춰 진행했다.

가장 기본적인 부분에 대한 코드 컨벤션을 다음과 같이 설정했다.

|제목|내용|
|------|---|
|클래스 이름|PascalCase|
|함수 이름|camelCase|
|변수 이름|camelCase|
|문자열 리소스 이름|snake_case|
|문자열 이름|(페이지_)용도|
|레이아웃 이름|속성_페이지_위치|
|뷰 이름|속성_페이지_용도(_사용방법)|
|리스트 내 변수|엔터로 정리|
|enum class 내 변수 이름|모두 다 대문자|
|drawable 내 이미지 이름|img(_위치)_용도|
|drawable 내 셀렉터 이름|selector(_위치)_용도|
|drawable 내 아이콘 이름|ic(_위치)_용도|
|by lazy|엔터로 구분|
|조건이 3개 이상일 때 |when 사용|
|코드 한 줄을 여러 줄로 작성하는 경우|안드로이드 스튜디오의 흰 줄을 넘어가는 경우|
|기본적인 코드 정리|CTRL + ALT + L|

### 협업 관련 사항 조정
**안드로이드 스튜디오** 사용

에뮬레이터는 **Nexus 5 API 31** 사용

**풀 리퀘스트** 전에는 말해주기 - 
  풀 리퀘스트에는 최대한 이름과 내용을 자세히 기록하고 팀원을 리뷰어로 등록해 최소 1명에게 확인받은 후 merge 진행

**Readme.md**를 이용해서 개발 기록 작성


[UserDatabase](https://github.com/heesoo-park/TeamAssignment3_2/blob/main/ReadMeFiles/UserDatabase.md)

[User](https://github.com/heesoo-park/TeamAssignment3_2/blob/main/ReadMeFiles/User.md)

[Post](https://github.com/heesoo-park/TeamAssignment3_2/blob/1095754842470daf81b60dadbd2711e4c874cd71/ReadMeFiles/Post.md)

[CommentUser](https://github.com/heesoo-park/TeamAssignment3_2/blob/main/ReadMeFiles/CommentUser.md)

[theme](https://github.com/heesoo-park/TeamAssignment3_2/blob/main/ReadMeFiles/theme.md)


## [로그인 페이지](https://github.com/heesoo-park/TeamAssignment3_2/blob/main/ReadMeFiles/SignInPageActivity.md)
![image](https://github.com/heesoo-park/TeamAssignment3_2/assets/116724657/b6906e7f-3cba-42c7-989f-489c7e59ca54) ![image](https://github.com/heesoo-park/TeamAssignment3_2/assets/116724657/fc333dbe-21de-4f68-a509-18d6a8dbed9c)

사용자의 정보를 DB에서 찾아 가입된 사용자인지 확인 하는 액티비티

가입 되지 않은 사용자는 회원가입 링크로 이동가능하다


![Honeycam 2023-12-28 21-02-03](https://github.com/heesoo-park/TeamAssignment3_2/assets/116724657/f91dcc1d-bb90-4da1-8d7b-ce66d1bce24c)

가로 모드에선 양옆의 여백을 좀 더 줬고

상하 여백을 줄였습니다

한 화면에 전부 띄우지 못해 스크롤 뷰를 추가해서 사용자가 스크롤 할 수 있게끔 구현했다

## [회원가입 페이지](https://github.com/heesoo-park/TeamAssignment3_2/blob/main/ReadMeFiles/SignUpPageActivity.md)
![image](https://github.com/heesoo-park/TeamAssignment3_2/assets/116724657/9d7a6710-e9dd-42d2-964a-92cf67e14217) ![image](https://github.com/heesoo-park/TeamAssignment3_2/assets/116724657/cce9bf58-d3cd-4074-9d40-0d34b78ae313)

데이터베이스에 유저의 정보를 입력하는 페이지

유효성검사로 중복된 아이디를 체크하고

비밀번호등 조건에 맞으면 회원의 정보를 저장한다

![image](https://github.com/heesoo-park/TeamAssignment3_2/assets/116724657/84c0cd18-6ce1-48ad-b6e5-0338dbce5fe4)

가로 모드에서 로그인페이지와 같이 양옆 여백을 좀 더 줬고

스크롤 뷰로 스크롤 가능하게 구현했다

### [프로필 사진 선택 페이지](https://github.com/heesoo-park/TeamAssignment3_2/blob/dev/ChooseProfileActivity.md)
![Honeycam 2023-12-28 21-13-09](https://github.com/heesoo-park/TeamAssignment3_2/assets/116724657/050885db-2a1c-4a39-b432-95d19e451a74)


계정 생성시 프로필 사진을 생성하는 페이지

목록에서 사진을 선택하면 크게 보여주고 수정하기를 선택시 생성되는 계정의 프로필사진으로 저장

![image](https://github.com/heesoo-park/TeamAssignment3_2/assets/116724657/4ccbc03f-ef97-4bc4-a6a4-63540701fe50)

가로모드에선 사진을 오른쪽에서 보여주게 구현

## [메인 페이지](https://github.com/heesoo-park/TeamAssignment3_2/blob/dev/MainlPageActivity.md)
![image](https://github.com/heesoo-park/TeamAssignment3_2/assets/116724657/9d6b470c-fe88-4b2e-a8c8-3ca419e290b2) ![image](https://github.com/heesoo-park/TeamAssignment3_2/assets/116724657/d9dae805-c79c-4e45-a66c-55bd81f8b832)

화면 상단에는 왼쪽에 로고 오른쪽에 사용자 프로필이 있다

그 밑에는 다른 유저들의 프로필이 있는데 본인의 프로필의 테두리는 파란색으로 구별이 되게 했다
![Honeycam 2023-12-28 21-38-04](https://github.com/heesoo-park/TeamAssignment3_2/assets/116724657/7fddc7b5-97ac-4b38-be90-90c39ba18776)

스크롤 기능도 넣었는데

프로필은 가로로 게시물들은 세로로 스크롤해서 볼수 있다

![Honeycam 2023-12-28 21-40-54](https://github.com/heesoo-park/TeamAssignment3_2/assets/116724657/b7fc1748-c0b9-430e-b7e0-276f1e1a72c1)

좋아요 버튼과 더보기 버튼도 구현했는데

좋아요를 누르지 않은 게시물에 좋아요를 누르면 숫자가 추가되고 이미지가 변한다

게시물의 글이 길다면 더보기 버튼이 활성화되면서

클릭시 게시물을 늘려서 볼 수 있게 된다

![image](https://github.com/heesoo-park/TeamAssignment3_2/assets/116724657/d35823e0-8e2f-4890-9012-383f558a0b74)

가로모드는 이런식으로 구현했는데

게시물의 내용을 좀더 길게 볼수 있게 했다.

## [디테일 페이지](https://github.com/heesoo-park/TeamAssignment3_2/blob/dev/DetailPageActivity.md)
![image](https://github.com/heesoo-park/TeamAssignment3_2/assets/116724657/ee367f08-6fa9-4a3f-8061-d33b0a4bfbef) ![image](https://github.com/heesoo-park/TeamAssignment3_2/assets/116724657/2978b9c5-ebff-4464-8fed-58e29e7f1692)


메인 페이지에서 사용자들의 프로필을 누르면 이동하게 된다

입력받은 사용자 정보를 바탕으로 구성되어 있으며

사용자의 아이디 이름 상태메세지가 화면 상단에 출력되고

아래엔 사용자가 게시한 게시물들이 출력된다

![image](https://github.com/heesoo-park/TeamAssignment3_2/assets/116724657/05131199-6562-4902-9a8c-e27a1cb62a99)

로그인한 사용자가 본인이라면 편집 버튼과 로그아웃 버튼이 나타나게 된다

편집버튼으로 이동하는 편집 페이지는 회원가입할때 사용한 페이지를 재사용해서 만들었다

![image](https://github.com/heesoo-park/TeamAssignment3_2/assets/116724657/23fc9189-94c0-4ecc-8bd4-f62e76332dfd)

가로모드의 구성은 메인페이지와 유사하다

### 편집 페이지
![image](https://github.com/heesoo-park/TeamAssignment3_2/assets/116724657/4201dbb1-4034-4286-ad74-d80a8926a8f7)

회원가입 페이지를 재사용 했는데

ID입력칸을 상태메세지 입력창으로 바꿧다

사용자의 이름 상태 비밀번호 그리고 프로필 이미지를 수정할 수 있다.

## TroubleShooting
- 브랜치에서 풀 했을시 충돌 문제

  깃에서 개발하고 있는 dev브랜치가 업데이트가 되면 본인이 작업하고 있는 파일에 pull 해야 하는데 내가 작업한 부분과

  깃에서 불러온 부분이 겹쳤을 때 충돌이 일어나게 된다

  ![](https://xacdo.net/wp/wp-content/uploads/2021/02/idea-idea_2016_3_vcs_magic_resolve.png)

  그랬을때 이런 이미지가 나타나게 되는대

  이미지의 >>> 버튼을 누르면 가운데 파일로 옮겨지게 된다

  서로의 코드를 비교하고 필요한 코드와 그렇지 않은 코드를 구분한지 머지하게해서 해결했다.
  
- ImageButton 클릭시 stroke를 주는 selector를 작성해서 적용해도 아무런 변화가 없는 문제

-> stroke가 객체의 안쪽으로 생겨서 생기는 문제

-> ImageButton에 padding을 줘 stroke가 보이게 함

-> 해결

- layout_height가 wrap_content인 ConstraintLayout 안에 있는 TextView의 marginBottom이 적용되지 않는 문제

-> Bottom에 대한 제약조건이 없어서 생긴 문제
  
-> app:layout_constraintBottom_toBottomOf="parent" 추가
  
-> 해결

- 애니메이션이 부자연스럽게 진행되었던 문제

-> animation 을 할 때에 overridePendingTransition() 함수를 이용.

이 함수에는 두 인자가 들어가는데 첫번째 인자는 새로 들어오는 화면 그리고 두번째 인자는 사라지는 화면의 animation.xml 파일을 추가해 주어야한다.

애니메이션 화면이 부자연스럽게 넘어갔던 이유는 새로 나타나는 화면에 대한 애니메이션 파일을 비워두고 사라지는 화면에 대한 애니메이션만 추가해주었기 때문이다.

만약 두 화면이 둘 다 한 방향으로 밀리는 슬라이드 애니메이션 구현을 원한다면 첫번째와 두번째 인자에 둘다 slide 애니메이션을 넣어주면된다.

만약 새로운 화면이 오른쪽에서 들어오고 뒤에 있던 창이 그대로 있어주기를 바란다면 새로 들어오는 파일은 슬라이드 애니메이션을 사용해주고 원래 있었던 화면은 천천히 fade out 애니메이션을 지정해주었다.

원래 있었던 화면이 완전히 사라지기 전에 앞에 새로운 창으로 가려지게 만들기 위해서 fade out의 시간 설정을 slide 애니메이션보다 훨씬 길게 설정하였다.

- 사용자 정보를 수정할 때 프로필 이미지를 변경했는데 게시물의 프로필 이미지는 변경되지 않는 문제
   
-> ChooseProfileActivity에서 수정하기 버튼을 누를 때 사용자 프로필 이미지 뿐 아니라 사용자의 게시물을 순회하며 프로필 이미지를 변경

-> 해결

- 댓글창에서 사용자의 아이디가 출력되는 문제
   
-> CommentUser의 id 변수 이름을 name으로 변경

-> DetailPageActivity에서 PostPopUpActivity로 인텐트 넘겨줄 때 로그인한 사용자의 이름도 넘겨줌

-> PostPopUpActivity의 댓글 리스트 세팅하는 함수에서 텍스트를 comment.id에서 comment.name으로 변경

-> 해결

- 좋아요를 댓글 페이지에서 눌렀을 때 이전 디테일 페이지에서 반영되지 않는 문제
   
-> DetailPageActivity에서 PostPopUpActivity로 넘어갈 때 profileRefresh.launch(intent)를 사용

-> PostPopUpActivity에서 뒤로가기 버튼을 누를 때 setResult(RESULT_OK, intent)를 보냄

-> 해결

- 좋아요를 댓글 페이지에서 누르고 하단의 뒤로가기 버튼을 눌렀을 때 이전 페이지에서 반영되지 않는 문제 &
좋아요를 디테일 페이지에서 누르고 하단의 뒤로가기 버튼을 눌렀을 때 이전 페이지에서 반영되지 않는 문제

-> 댓글 페이지와 디테일 페이지에 OnBackPressedCallback 함수를 만들어서 추가

-> 함수 내에서는 기존 뒤로가기 버튼이 하던 역할을 그대로 적용

-> 해결

- 디테일 페이지와 댓글 페이지에서 게시물 이미지를 길게 눌렀을 때 좋아요 기능 작동하지 않는 문제
    
-> 메인 페이지에서 사용하던 관련 코드를 가져와 디테일 페이지에 복사 후 페이지에 맞게 수정
   
-> 메인 페이지에서 사용하던 관련 코드를 가져와 댓글 페이지에 복사 후 페이지에 맞게 수정

- 디테일 페이지에서 로그아웃 버튼을 눌렀을 때 로그인 페이지에 아이디와 비밀번호가 남아있는 문제
    
-> 인텐트 플래그를 활용(Intent.FLAG_ACTIVITY_NEW_TASK or Intent.FLAG_ACTIVITY_CLEAR_TASK)

-> 해결

- 회원가입에서 아이디 칸에 한글을 입력하는 경우 잘못된 에러 출력가 출력되는 문제
    
-> SignUpErrorMessage에서 INVALID_ID를 가져와 수정

-> 해결

- 메인 페이지에서 setPostList 함수가 생각했던 것보다 더 많이 실행되는 문제
    
-> 함수를 호출하는 영역이 반복문 안이었기 때문에 생긴 문제

-> 반복문 밖으로 꺼냄

-> 해결

